/**
 * Devver Overlay Styles
 * Injected into Shadow DOM for complete style isolation
 */

// CSS variables defined at :host level for Shadow DOM
const css = `:host{--devver-font:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;--devver-bg-dark:#13151a;--devver-bg-card:#1e2028;--devver-bg-card-hover:#262932;--devver-bg-elevated:#23262f;--devver-border:rgba(255,255,255,0.08);--devver-border-hover:rgba(255,255,255,0.15);--devver-text:#f1f1f1;--devver-text-secondary:#a0a0a0;--devver-text-muted:#6b6b6b;--devver-accent:#ffffff;--devver-accent-light:#ffffff;--devver-accent-dark:#e5e5e5;--devver-accent-glow:rgba(255,255,255,0.2);--devver-pin:#ff5d5d;--devver-pin-glow:rgba(255,93,93,0.3);--devver-shadow:0 4px 24px rgba(0,0,0,0.4);--devver-shadow-lg:0 8px 40px rgba(0,0,0,0.5);--devver-glow:0 0 20px var(--devver-accent-glow);--devver-radius:8px;--devver-radius-lg:12px;--devver-radius-full:9999px;--devver-transition:150ms ease;--devver-transition-slow:250ms cubic-bezier(0.4,0,0.2,1)}.devver-toolbar{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);display:flex;align-items:center;gap:4px;padding:6px;background:var(--devver-bg-dark);border:1px solid var(--devver-border);border-radius:var(--devver-radius-full);box-shadow:var(--devver-shadow-lg);z-index:2147483644;transition:all var(--devver-transition-slow);--devver-drawer-offset:0px;pointer-events:auto}.devver-toolbar.devver-toolbar-drawer-open{--devver-drawer-offset:400px}.devver-toolbar.devver-toolbar-bottom-left{left:20px;right:auto;transform:translateX(0)}.devver-toolbar.devver-toolbar-bottom-center{left:calc((100vw - var(--devver-drawer-offset)) / 2);right:auto;transform:translateX(-50%)}.devver-toolbar.devver-toolbar-bottom-right{left:auto;right:calc(20px + var(--devver-drawer-offset));transform:translateX(0)}.devver-toolbar-btn{position:relative;width:40px;height:40px;border:none;border-radius:50%;background:transparent;color:var(--devver-text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--devver-transition);font-size:18px}.devver-toolbar-btn:hover{background:var(--devver-bg-elevated);color:var(--devver-text)}.devver-toolbar-btn.devver-active{background:var(--devver-accent);color:var(--devver-bg-dark);box-shadow:var(--devver-glow)}.devver-toolbar-btn.devver-active:hover{background:var(--devver-accent-light)}.devver-toolbar-divider{width:1px;height:24px;background:var(--devver-border);margin:0 4px}.devver-toolbar-badge{position:absolute;top:2px;right:2px;min-width:16px;height:16px;padding:0 4px;background:var(--devver-pin);color:white;font-size:10px;font-weight:600;border-radius:var(--devver-radius-full);display:flex;align-items:center;justify-content:center;font-family:var(--devver-font)}.devver-overlay{position:fixed;inset:0;z-index:2147483646;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity var(--devver-transition-slow);pointer-events:none}.devver-overlay-active{opacity:1;pointer-events:all}.devver-overlay-backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.6);backdrop-filter:blur(8px)}.devver-overlay-modal{position:relative;background:var(--devver-bg-card);border:1px solid var(--devver-border);border-radius:var(--devver-radius-lg);box-shadow:var(--devver-shadow-lg);max-width:90%;max-height:90vh;overflow:auto;transform:scale(0.95) translateY(10px);transition:transform var(--devver-transition-slow);color:var(--devver-text);pointer-events:auto}.devver-overlay-active .devver-overlay-modal{transform:scale(1) translateY(0)}.devver-overlay-modal-anchored{position:fixed;max-width:360px;min-width:300px;transform:none;animation:devver-pop var(--devver-transition-slow)}@keyframes devver-pop{from{opacity:0;transform:scale(0.95) translateY(8px)}to{opacity:1;transform:scale(1) translateY(0)}}.devver-overlay-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--devver-border)}.devver-overlay-title{margin:0;font-size:14px;font-weight:600;color:var(--devver-text);font-family:var(--devver-font);letter-spacing:-0.01em}.devver-overlay-close{background:none;border:none;font-size:18px;line-height:1;cursor:pointer;color:var(--devver-text-muted);padding:6px;margin:-6px;display:flex;align-items:center;justify-content:center;border-radius:var(--devver-radius);transition:all var(--devver-transition)}.devver-overlay-close:hover{background:var(--devver-bg-elevated);color:var(--devver-text)}.devver-overlay-body{padding:16px 20px 20px;font-family:var(--devver-font);font-size:14px;color:var(--devver-text-secondary);line-height:1.6}.devver-overlay-body p{margin:0}.devver-comment-layer{position:fixed;inset:0;pointer-events:none;z-index:2147483642}.devver-comment-pin{position:absolute;transform:translate(-50%,-50%);width:28px;height:28px;border-radius:50%;border:2px solid var(--devver-bg-dark);background:var(--devver-pin);color:white;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;font-family:var(--devver-font);cursor:pointer;box-shadow:var(--devver-shadow),0 0 0 0 var(--devver-pin-glow);pointer-events:auto;transition:all var(--devver-transition)}.devver-comment-pin:hover{transform:translate(-50%,-50%) scale(1.15);box-shadow:var(--devver-shadow),0 0 0 6px var(--devver-pin-glow)}.devver-comment-pin:focus{outline:none;box-shadow:var(--devver-shadow),0 0 0 6px var(--devver-pin-glow)}.devver-comment-pin-preview{animation:devver-pin-pulse 1.5s ease-in-out infinite}@keyframes devver-pin-pulse{0%,100%{box-shadow:var(--devver-shadow),0 0 0 0 var(--devver-pin-glow)}50%{box-shadow:var(--devver-shadow),0 0 0 8px var(--devver-pin-glow)}}.devver-comment-editor{position:fixed;transform:translate(-50%,calc(-100% - 16px));background:var(--devver-bg-card);border:1px solid var(--devver-border);border-radius:var(--devver-radius-lg);box-shadow:var(--devver-shadow-lg);width:320px;z-index:2147483647;overflow:hidden;animation:devver-pop var(--devver-transition-slow);color:var(--devver-text);pointer-events:auto}.devver-comment-editor-header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--devver-border)}.devver-comment-editor-header span{font-weight:600;font-size:13px;color:var(--devver-text);font-family:var(--devver-font)}.devver-comment-editor-close{background:none;border:none;color:var(--devver-text-muted);font-size:18px;cursor:pointer;padding:4px;margin:-4px;border-radius:var(--devver-radius);transition:all var(--devver-transition);display:flex;align-items:center;justify-content:center}.devver-comment-editor-close:hover{background:var(--devver-bg-elevated);color:var(--devver-text)}.devver-comment-editor-form{padding:16px;display:flex;flex-direction:column;gap:12px}.devver-comment-editor textarea{width:100%;min-height:80px;background:var(--devver-bg-dark);border:1px solid var(--devver-border);border-radius:var(--devver-radius);padding:12px;resize:vertical;font-family:var(--devver-font);font-size:14px;color:var(--devver-text);transition:all var(--devver-transition);box-sizing:border-box}.devver-comment-editor textarea::placeholder{color:var(--devver-text-muted)}.devver-comment-editor textarea:focus{outline:none;border-color:var(--devver-accent);box-shadow:0 0 0 3px var(--devver-accent-glow)}.devver-comment-editor-actions{display:flex;justify-content:flex-end;gap:8px}.devver-comment-editor-actions button{border:none;border-radius:var(--devver-radius);padding:10px 16px;cursor:pointer;font-weight:500;font-size:13px;font-family:var(--devver-font);transition:all var(--devver-transition)}.devver-comment-editor-cancel{background:var(--devver-bg-elevated);color:var(--devver-text-secondary)}.devver-comment-editor-cancel:hover{background:var(--devver-bg-card-hover);color:var(--devver-text)}.devver-comment-editor-submit{background:var(--devver-accent);color:var(--devver-bg-dark);font-weight:600}.devver-comment-editor-submit:hover{background:var(--devver-accent-light)}.devver-comment-editor-submit:disabled{opacity:0.6;cursor:not-allowed}.devver-comment-editor-author{display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--devver-border)}.devver-comment-editor-author-label{font-size:12px;color:var(--devver-text-muted)}.devver-comment-editor-change-author{display:flex;align-items:center;gap:6px;padding:4px 10px;background:var(--devver-bg-dark);border:1px solid var(--devver-border);border-radius:var(--devver-radius-full);color:var(--devver-text);font-size:13px;font-family:var(--devver-font);cursor:pointer;transition:all var(--devver-transition)}.devver-comment-editor-change-author:hover{background:var(--devver-bg-elevated);border-color:var(--devver-border-hover)}.devver-comment-editor-change-author svg{color:var(--devver-text-muted)}.devver-comment-editor-author-name{font-weight:500}.devver-comment-mode-backdrop{position:fixed;inset:0;background:rgba(255,255,255,0.15);z-index:2147483640;pointer-events:none;opacity:0;transition:opacity var(--devver-transition-slow)}.devver-comment-mode-backdrop.devver-visible{opacity:1}.devver-comment-drawer-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.4);opacity:0;pointer-events:none;transition:opacity var(--devver-transition-slow);z-index:2147483641}.devver-comment-drawer-backdrop-visible{opacity:1;pointer-events:all}.devver-comment-drawer{position:fixed;top:0;right:0;bottom:0;width:380px;max-width:calc(100vw - 20px);background:var(--devver-bg-card);border-left:1px solid var(--devver-border);box-shadow:-8px 0 40px rgba(0,0,0,0.4);z-index:2147483643;display:flex;flex-direction:column;transform:translateX(100%);pointer-events:none;transition:transform var(--devver-transition-slow);color:var(--devver-text)}.devver-comment-drawer-open{pointer-events:all;transform:translateX(0)}.devver-comment-drawer-header{padding:18px 20px;font-weight:600;font-size:14px;border-bottom:1px solid var(--devver-border);display:flex;align-items:center;justify-content:space-between;font-family:var(--devver-font)}.devver-comment-drawer-close{background:none;border:none;color:var(--devver-text-muted);font-size:20px;cursor:pointer;padding:4px;margin:-4px;border-radius:var(--devver-radius);transition:all var(--devver-transition);display:flex;align-items:center;justify-content:center}.devver-comment-drawer-close:hover{background:var(--devver-bg-elevated);color:var(--devver-text)}.devver-comment-drawer-list{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:8px}.devver-comment-drawer-item{text-align:left;border:1px solid var(--devver-border);border-radius:var(--devver-radius);padding:14px 16px;background:var(--devver-bg-dark);cursor:pointer;transition:all var(--devver-transition);font-family:var(--devver-font);display:flex;gap:12px;align-items:flex-start}.devver-comment-drawer-item:hover{background:var(--devver-bg-elevated);border-color:var(--devver-border-hover)}.devver-comment-drawer-num{flex-shrink:0;width:24px;height:24px;background:var(--devver-pin);color:white;font-size:11px;font-weight:700;border-radius:50%;display:flex;align-items:center;justify-content:center}.devver-comment-drawer-content{flex:1;min-width:0}.devver-comment-drawer-title{font-weight:600;font-size:13px;color:var(--devver-text);margin-bottom:4px;line-height:1.4;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.devver-comment-drawer-meta{display:flex;align-items:center;gap:8px;margin-bottom:4px}.devver-comment-drawer-author{font-weight:600;font-size:12px;color:var(--devver-text)}.devver-comment-drawer-date{font-size:11px;color:var(--devver-text-muted)}.devver-comment-drawer-text{font-size:12px;color:var(--devver-text-secondary);line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.devver-comment-drawer-empty{color:var(--devver-text-muted);font-size:13px;text-align:center;padding:40px 20px;font-family:var(--devver-font)}.devver-settings-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.4);opacity:0;pointer-events:none;transition:opacity var(--devver-transition-slow);z-index:2147483639}.devver-settings-backdrop.devver-visible{opacity:1;pointer-events:all}.devver-settings{position:fixed;top:0;right:0;bottom:0;width:340px;max-width:calc(100vw - 20px);background:var(--devver-bg-card);border-left:1px solid var(--devver-border);box-shadow:-8px 0 40px rgba(0,0,0,0.4);z-index:2147483646;display:flex;flex-direction:column;transform:translateX(100%);pointer-events:none;transition:transform var(--devver-transition-slow);color:var(--devver-text);font-family:var(--devver-font)}.devver-settings.devver-open{pointer-events:all;transform:translateX(0)}.devver-settings-header{padding:18px 20px;border-bottom:1px solid var(--devver-border);display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.devver-settings-title{font-weight:600;font-size:14px;color:var(--devver-text)}.devver-settings-close{background:none;border:none;color:var(--devver-text-muted);font-size:18px;cursor:pointer;padding:4px;margin:-4px;border-radius:var(--devver-radius);transition:all var(--devver-transition);display:flex;align-items:center;justify-content:center}.devver-settings-close:hover{background:var(--devver-bg-elevated);color:var(--devver-text)}.devver-settings-body{flex:1;overflow-y:auto;padding:20px}.devver-settings-field{margin-bottom:0}.devver-settings-label{display:block;font-size:12px;font-weight:500;color:var(--devver-text-secondary);margin-bottom:6px}.devver-settings-input{width:100%;padding:10px 12px;background:var(--devver-bg-dark);border:1px solid var(--devver-border);border-radius:var(--devver-radius);color:var(--devver-text);font-size:14px;font-family:var(--devver-font);transition:all var(--devver-transition);box-sizing:border-box}.devver-settings-input::placeholder{color:var(--devver-text-muted)}.devver-settings-input:focus{outline:none;border-color:var(--devver-accent);box-shadow:0 0 0 3px var(--devver-accent-glow)}.devver-settings-field-position{margin-top:16px;padding-top:16px;border-top:1px solid var(--devver-border)}.devver-settings-position-options{display:flex;flex-direction:column;gap:8px}.devver-settings-position-option{display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--devver-bg-dark);border:1px solid var(--devver-border);border-radius:var(--devver-radius);cursor:pointer;transition:all var(--devver-transition);font-size:13px;color:var(--devver-text-secondary)}.devver-settings-position-option:hover{background:var(--devver-bg-elevated);border-color:var(--devver-border-hover)}.devver-settings-position-option.devver-selected{background:var(--devver-bg-elevated);border-color:var(--devver-accent);color:var(--devver-text)}.devver-settings-position-option input[type="radio"]{position:absolute;opacity:0;pointer-events:none}.devver-settings-position-radio{width:16px;height:16px;border-radius:50%;border:2px solid var(--devver-border);background:transparent;transition:all var(--devver-transition);position:relative;flex-shrink:0}.devver-settings-position-option.devver-selected .devver-settings-position-radio{border-color:var(--devver-accent)}.devver-settings-position-option.devver-selected .devver-settings-position-radio::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:8px;height:8px;border-radius:50%;background:var(--devver-accent)}@media (max-width:640px){.devver-toolbar{bottom:16px;padding:4px}.devver-toolbar-btn{width:36px;height:36px;font-size:16px}.devver-overlay-modal-anchored{max-width:calc(100vw - 32px);min-width:auto}.devver-comment-drawer{width:calc(100vw - 60px)}.devver-settings{width:calc(100vw - 60px)}.devver-comment-editor{width:calc(100vw - 32px);max-width:320px}}@media (prefers-reduced-motion:reduce){*,*::before,*::after{animation-duration:0.01ms!important;animation-iteration-count:1!important;transition-duration:0.01ms!important}}`;

// Styles that need to be in the light DOM (for cursor change on body)
const lightDomCss = `.devver-comment-mode{cursor:crosshair!important}.devver-comment-mode *{cursor:crosshair!important}`;

/**
 * Get the CSS string for injection into Shadow DOM
 */
export function getStyles(): string {
  return css;
}

/**
 * Inject light DOM styles (cursor styles that affect the host page)
 */
let lightDomInjected = false;
export function injectLightDomStyles(): void {
  if (lightDomInjected) return;
  const style = document.createElement("style");
  style.id = "devver-overlay-light-styles";
  style.textContent = lightDomCss;
  document.head.appendChild(style);
  lightDomInjected = true;
}
